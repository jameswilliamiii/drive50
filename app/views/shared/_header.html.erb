<header>
  <div class="container">
    <div class="header-content">
      <h1><%= link_to "Drive50", root_path %></h1>
      <% if authenticated? %>
        <div class="header-nav" data-controller="menu" data-action="click@window->menu#handleClickOutside">
          <button type="button" class="menu-button" data-menu-target="button" data-action="click->menu#toggle" aria-label="Toggle menu" aria-expanded="false">
            <%= icon_menu(size: 24, class: "menu-icon") %>
          </button>
          <nav class="menu" data-menu-target="menu">
            <%= button_to "Start New Drive", drive_sessions_path,
                          method: :post,
                          class: "menu-item menu-item-primary-link",
                          form: { style: "display: inline;" } %>
            <hr class="menu-divider">
            <%= link_to "All Drives", all_drive_sessions_path, class: "menu-item" %>
            <%= link_to "Export Log", export_drive_sessions_path(format: :csv), class: "menu-item" %>
            <%= link_to "Settings", edit_user_path, class: "menu-item" %>
            <hr class="menu-divider">
            <%= link_to "Sign Out", session_path, data: { turbo_method: :delete }, class: "menu-item" %>
          </nav>
        </div>
      <% else %>
        <div class="header-nav" data-controller="menu" data-action="click@window->menu#handleClickOutside">
          <button type="button" class="menu-button" data-menu-target="button" data-action="click->menu#toggle" aria-label="Toggle menu" aria-expanded="false">
            <%= icon_menu(size: 24, class: "menu-icon") %>
          </button>
          <nav class="menu" data-menu-target="menu">
            <%= link_to "Sign In", new_session_path, class: "menu-item" %>
            <%= link_to "Sign Up", new_registration_path, class: "menu-item menu-item-primary" %>
          </nav>
        </div>
      <% end %>
    </div>
  </div>
</header>

